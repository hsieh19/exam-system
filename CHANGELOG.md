# 更新日志 (Changelog)

## [1.0.15] - 2026-01-20

### 🎨 登录界面视觉增强与系统健康优化
- **整体放大**: 显著增大了登录卡片的宽度、字体以及输入框尺寸，使界面更加大气，视觉焦点更集中。
- **响应式优化**: 优化了登录框在不同屏幕尺寸下的自适应表现。
- **版本对齐**: 引入了前后端版本自动化同步机制，确保管理后台显示的系统版本始终与后端物理版本保持一致。
- **间距平衡**: 精确调整了 Logo、表单项与登录按钮之间的间距，提升了整体排版的美感。

## [1.0.14] - 2026-01-20

### 🔄 环境配置管理重大升级 (模板填充法)
- **核心逻辑重构**: 引入全新的“模板填充”机制。系统启动前会以 `.env.example` 为底稿，自动将旧配置项的值精准迁移。
- **配置同步**: 若新版本增加了环境变量（如 `NODE_ENV`），系统将自动将其及默认值以正确的排版补全，不再需要手动干预。
- **服务管理优化**: 修复了 `run.sh` 中 Redis 服务启动时无法识别别名（Alias）导致的红色报错问题。
- **文档修正**: 同步修正了 `README.md` 中关于 Redis 一键配置的菜单项编号（修正为 11）。

## [1.0.13] - 2026-01-20

### 🛠️ 脚本与文档修复
- **服务管理**: 修复了 `run.sh` 中 Redis 服务启动时无法识别别名（Alias）导致的报错问题。
- **文档精确化**:
  - 修正了 `README.md` 中关于一键配置 Redis 的菜单项编号说明（由选项 6 修正为 11）。
  - 同步更新了 `.env.example`，增加了 `NODE_ENV` 变量模板，确保与文档一致。

## [1.0.12] - 2026-01-20

### 🚀 系统优化与安全性
- **高并发支持**: 在 `README.md` 中增加了详细的数据库选型、Redis 会话及连接池优化配置指南。
- **默认账号补完**: 修正了数据库初始化逻辑，现在系统首次启动时会自动创建 `admin` 和 `student` 两个默认账号，且账号可由管理员自行删除。
- **UI/UX 改进**:
  - 删除了登录页面下方的默认账号明文显示，增强隐私安全。
  - 统一了文档、UI 与后端初始化逻辑中的默认用户名（原“张三”统一为 `student`）。
- **Bug 修复**: 修复了 PostgreSQL 初始化脚本中缺失 `VALUES` 关键字的问题。

## [1.0.11] - 2026-01-20

### 🛡️ 安全性与健壮性增强
- **配置校验**:
  - 在 `server.js` 启动时增加 `.env` 文件探测，若缺失则输出黄色警告日志。
  - 在 `run.sh` 启动流程中增加配置文件强制检查。
  - 若 `.env` 缺失但存在 `.env.example`，脚本将自动根据模板创建配置文件，确保环境配置项完整。
  - 防止系统在无配置状态下“静默启动”导致的高并发环境降级风险。

## [1.0.10] - 2026-01-20

### 🐛 问题修复
- **部署脚本**:
  - 修复了系统更新时 `run.sh` 未能同步更新 `.env.example` 文件的问题。
  - 现在执行更新操作将自动刷新 `.env.example`，方便用户参考最新的配置项（如 `USE_REDIS`, `DB_CONNECTION_LIMIT`）。

## [1.0.9] - 2026-01-20

### 🔥 高并发架构优化
- **会话架构 (Session)**:
  - 实现了通用的 `SessionStore` 接口，支持内存和 Redis 两种模式。
  - 引入 `USE_REDIS` 环境变量，支持基于 Redis 的分布式会话管理。
- **数据库性能**:
  - 支持通过 `DB_CONNECTION_LIMIT` 环境变量配置 MySQL/PostgreSQL 的连接池大小。
- **文件上传稳定性**:
  - 将文件上传方式切换为磁盘暂存 (Disk Storage)，防止高并发下内存溢出 (OOM)。
- **进程管理**:
  - 新增 `ecosystem.config.js` 配置文件，支持 PM2 集群模式。

### 🛠️ 系统工具
- **自动配置**:
  - 在 `run.sh` 中新增了 `install_redis` 功能 (菜单选项 11)。
  - 支持在 Linux 上一键安装并配置 Redis。

# 更新日志 (Changelog)

## [1.5.4] - 2026-02-26

### 📚 导入导出功能深度优化
- **导出筛选增强**：新增专业与设备类型级联筛选功能，支持按需导出特定范围内题目。
- **文件名规范化**：导出文件自动遵循 `题库名_专业_设备_时间戳.xlsx` 命名规则，并自动清理非法字符，提升归档管理效率。
- **导入模式切换**：新增“追加模式”与“覆盖模式”切换功能。覆盖模式支持高危警告提醒，防止数据误删。
- **一键下载模板**：导入界面新增“下载导入模板”按钮，自动生成带有标准表头及悬停显示批注说明的 Excel 模板。

### 🚑 Bug修复
- **修复题目业务字段缺失**：在导入导出流程中全面补齐 `是否必考` (must) 字段，确保题库核心属性在迁移过程中的完整性。
- **优化 Excel 批注交互**：修复 SheetJS 导出批注默认全部展开的问题，现在批注默认隐藏，仅在鼠标悬停在表头时显示。
- **更新专业示例文本**：将专业批注中的示例文本由 "电力工程" 改为 "电气"，与系统实际常用名称对齐。

## [1.5.3] - 2026-02-22

### 🚑 Bug修复
- **修复 MySQL 迁移失败弹窗误报**：修复前端点击“切换数据库”成功迁移数据后，由于记录切换日志（操作已是新数据库）失败导致的 `500` 错误，进而引起界面弹窗误报"切换失败"的问题。现在迁移成功会优先响应前端，确保交互正确。
- **强化 MySQL 兼容与防报错**：针对 MySQL 数据库重新设计了底层 API，全面由 `pool.execute` 切换为对连接池更加稳定的 `pool.query`；同时为所有表名和保留字列名添加了反引号（`` ` ``），根除了在复杂分页查询（尤其是携带 `LIMIT`）时报出 `Incorrect arguments to mysqld_stmt_execute` 的异常。
- **修复系统日志分页强制返回首页**：修复了在“系统日志”界面切换页码后，受页面 5 秒自动轮询刷新机制影响，导致页码被强行重置回第一页的 Bug。现在自动更新数据将妥善保持当前用户的所选页码。
- **完善数据库切换行为日志**：重构了系统的行为审计，数据库切换的动作现在会精准记录并展示 `来源数据库 → 目标数据库` 的完整轨迹（例：`SQLite → MySQL`），使得管理员查阅日志时更加清晰。
## [1.5.2] - 2026-02-10

### 🚑 Bug修复
- **修复推送人数统计异常**：修正了考试分析中推送人数显示不准确的问题。通过在 `/api/ranking/:paperId` 路由中使用 `Set` 对目标分组和目标用户进行去重统计，确保 `totalAssigned` 数值严格等于实际被推送的学生总数。
- **修复新推送覆盖旧推送问题**：重构了试卷推送的数据存储逻辑。引入 `user_exams` 映射表用于存储考生与试卷的关联关系，将推送操作由“更新试卷状态”改为“向映射表追加记录”。这解决了后一次推送覆盖前一次推送数据的问题，确保所有被推送的考生都能正常参加考试。
- **优化试卷获取与校验逻辑**：更新了考生端获取试卷及提交成绩的接口。系统现在根据 `user_exams` 映射表判断考生的考试资格、考试时段及提交状态，支持同一试卷多次推送给不同批次考生且互不干扰。

### 🧹 维护与清理
- **路由异常处理归一化**：为异步路由统一接入全局异常捕获，移除重复的 try-catch 与冗余日志，确保错误统一由全局处理器返回。
- **接口瘦身**：移除无前端入口的 `/api/records` 列表接口，保留按试卷/详情维度的记录查询能力。
- **查询构建复用**：抽取通用 SELECT 组装逻辑，减少用户与题目等查询的重复拼接代码。

## [1.5.1] - 2026-02-10

### 🎨 排行榜与考试分析界面优化
- **得分及排行榜布局统一**：重构管理员端“得分及排行榜”区域，采用等宽 Flex 列布局，保证“表头”和每一行数据列严格对齐。
- **字段对齐规则优化**：按照“排名靠左、阅卷查看靠右、其余字段居中”的视觉规范，统一调整所有列的对齐方式，提升排行榜的可读性。
- **考试分析操作栏体验优化**：将“题目正确率分析”按钮与试卷选择下拉框放置在同一行，并修复按钮文字换行问题，使操作区布局更紧凑、清晰。
 - **手动选题器正确率筛选**：在手动选题界面的筛选区域新增“正确率”过滤条件，支持按题目历史正确率区间（低于50%、50%-80%、高于80%等）快速筛选题目，辅助命题人识别高错题与区分度较好的题目。

## [1.5.0] - 2026-02-09

### 📊 考试分析与统计增强
- **新增题目正确率分析**：在考试分析界面新增“题目正确率分析”功能。管理员可一键查看当前试卷所有题目的答题分布，包括每道题的正确、错误、未答人数及对应的百分比。
- **可视化数据展示**：分析结果以直观的列表形式展现，支持对正确率较低的题目进行重点标注，帮助管理员精准评估题目难度与知识点掌握情况。
- **记录清理功能**：在分析面板新增“清空本次考试记录”功能，支持管理员在测试或特定场景下快速重置考试数据。

### 🛠️ 系统架构与数据适配
- **通用数据库适配层 (DB Adapter) 增强**：
  - 重构了 `db-adapter.js`，新增对 `all` 和 `run` 方法的深度支持，统一了 SQLite 与 MySQL/PostgreSQL 的异步调用规范。
  - 优化了底层查询性能，确保在大规模考试数据分析时的响应速度。
- **路由逻辑扩展**：在 `src/routes/index.js` 中新增了多个分析相关的 API 接口，支持按试卷 ID 聚合分析答题详情。

### 🎨 界面与体验优化
- **管理后台 UI 调整**：优化了分析页面的操作栏布局，采用 Flex 布局确保“题目正确率分析”与“清空记录”按钮在不同屏幕下的对齐美感。
- **响应式样式增强**：在 `style.css` 中新增了分析报表相关的专用样式，提升了数据表格在移动端的阅读体验。

## [1.4.1] - 2026-02-03

### 📚 试卷规则与必考题能力增强
- **新增“必考题数”规则字段**：在试卷规则表中为每种题型增加“必考题数”配置项，支持管理员按题型精细设置必考题的最少数量。
- **规则校验升级**：在原有“总分=100 且题库数量充足”的基础上，新增对必考题的双重校验——必考题数不得超过该题型总题数，且不得超过题库中实际标记为必考题的数量。
- **手动选题必考题校验**：在“手动选择题目”生成试卷前，逐题型校验已选题目中必考题数量，确保不少于规则中配置的“必考题数”，防止漏选必考题。

### 🧭 手动选题器体验优化
- **必考题筛选修复与增强**：修复“必考题/非必考题”筛选无效的问题，现可在选题器中精准过滤仅必考题或仅非必考题。
- **必考题数量直观展示**：在“单选题（已选X/X）”等题型按钮下方新增“必考题（已选X/X）”统计行，实时展示当前题型中已选必考题数量与目标值，便于管理员把控试卷结构。
- **已选题计数同步更新**：在选中/取消选中题目时，同时刷新普通题与必考题的计数显示，确保界面状态与实际选题完全一致。

### 🤖 自动生成试卷配置与权重抽题
- **自动生成区域重构**：点击“自动生成题目”后，在规则下方展示独立的“自动生成题目”卡片，标题右侧提供“生成试卷”按钮，布局与“手动选择题目”保持一致。
- **按题型拆分配置入口**：按“单选题 / 多选题 / 判断题”分别提供自动生成配置入口，支持对不同题型设置独立的抽题策略。
- **多维比例权重配置**：在每个题型的配置面板中，可分别为“题库归属（公共题库/各分组题库）”、“专业”、“设备类型”设置权重值（可为 0 或任意正整数），为空视为未设置、按平均概率参与抽题。
- **加权随机抽题算法**：自动生成试卷时，先按题型从题库中抽取满足“必考题数”的题目，再在剩余题目中按题库/专业/设备类型三维权重进行不放回加权随机抽样，直至满足题型配置的总题数。
- **自动生成与必考题联动**：若某题型配置了必考题数，自动生成流程会优先从必考题池中抽题，确保达到下限要求；若题库中必考题不足，则会在生成前给出明确校验失败提示。

## [1.4.0] - 2026-02-03

### 🎨 界面布局与可用性优化
- **管理后台及格分配置体验优化**：调整“及格分”输入框字号与总分保持一致，并增大输入框宽度与对齐方式，使表单布局更加统一、易读。
- **考试分析面板重构**：将考试分析拆分为三大板块——“人数统计”“得分统计”“答题时间统计”，并统一卡片尺寸与对齐方式，每行最多展示 3～4 个指标，其余位置预留扩展空间。
- **平均答题时间统计**：在“答题时间统计”中新增“平均答题时间”卡片，帮助管理员快速评估整体作答节奏与难度匹配度。
- **试卷列表信息对齐**：重构“已创建试卷”列表布局，将序号固定左侧、操作按钮固定右侧，中间字段均匀分布且内容居中显示，解决字段间距不协调与按钮换行问题。

### 🧮 成绩与排行榜能力增强
- **排行榜同步展示及格信息**：在考生端排行榜中同步展示“成绩（及格/不及格）”字段，并将表头“答题用户”统一改为“考生”，与管理后台统计口径对齐。
- **及格分下发到考生端**：将试卷配置的及格分透传到排行榜接口和前端展示逻辑，确保考生端看到的统计结果与后台设置完全一致。

### 🌓 主题与加载表现优化
- **主题切换延迟优化**：在各入口页面（登录、考试、考生端、管理端）中预先设置主题数据属性与 CSS 变量，消除页面初次加载及主题切换时的明显闪烁与延迟感，使明暗主题切换更顺滑。

## [1.3.5] - 2026-02-01

### 🚑 Bug修复
- **修复 Redis 配置加载失效问题**：将 `dotenv.config()` 移动到程序入口 `src/server.js` 的第一行。这解决了由于环境变量加载滞后导致 Session Store 在初始化时无法识别 `USE_REDIS` 配置，从而错误退回到内存模式（In-Memory）的问题。
- **版本一致性修正**：统一并修正了 `package.json` 与发布标签之间的版本号不匹配问题。

## [1.3.4] - 2026-01-25

### 🔐 飞书集成与用户管理增强
- **飞书多部门同步支持**：
  - 自动同步飞书用户所属的所有部门，并将其关联至对应的系统分组。
  - 支持飞书用户同时出现在多个分组中，适配复杂的组织架构。
- **飞书用户身份一致性保护**：
  - 锁定飞书用户的用户名与密码，禁止手动修改，确保身份唯一性。
  - 限制非超级管理员修改飞书用户的角色与分组权限。
- **手动绑定飞书账号**：
  - 在“添加用户”界面新增飞书 ID 输入框，支持手动绑定现有飞书账号。
  - 自动显示与所选分组对应的部门 ID（GroupId），简化配置流程。
- **SQLite 绑定错误修复**：解决超级管理员修改自身分组时由于参数未定义导致的 SQLite 绑定错误。

### 🎨 管理后台 UI/UX 优化
- **编辑用户布局重构**：将角色选择与分组选择调整至同一行显示，界面更加紧凑高效。
- **分组选择组件优化**：将编辑界面分组选择由复选框回归为下拉框，提升单次修改的便捷性。
- **界面清理**：移除了添加用户弹窗中冗余的说明文字，并将“允许飞书登录”开关调整至更合理的右侧对齐位置。
- **会话持久化增强**：优化飞书工作台环境下的会话存储逻辑，解决部分场景下登录态失效的问题。

## [1.3.3] - 2026-01-25

### 🚑 紧急修复
- **修复 PM2 实例状态显示 "stopped" 问题**：通过在 `ecosystem.config.js` 中显式配置 `cwd` 和绝对日志路径，解决更新后进程无法正常拉起的问题。
- **修复 SQLite 多进程数据回滚**：强制设置 `instances: 1`，确保 SQLite 环境下数据写入的原子性。
- **优化 `run.sh` 更新逻辑**：增加 `ecosystem.config.js` 的同步更新与备份机制，并修复 PM2 实例处于 "stopped" 状态时无法正常重载的问题。
- **修复登录页面自动弹出“未登录”提示**：在前端 `getCurrentUser` 中增加 Token 存在性校验，拦截无效的自动跳转逻辑。
- **修复虚假“异地登录”日志**：在 `SessionStore` 中引入 IP 与 User-Agent 追踪，精准区分同端刷新与跨设备登录。

## [1.3.2] - 2026-01-25

### 🚑 紧急修复
- **修复 PM2 初始运行缺失 logs 目录导致启动失败**：在 `ecosystem.config.js` 启动前自动创建 logs 目录，确保首次部署可直接启动。
- **增强 PM2 启动稳定性**：显式设置 `cwd` 并将日志输出固定到项目目录下的 logs，避免相对路径变化导致进程异常退出。

## [1.3.1] - 2026-01-24

### 🚑 紧急修复
- **修复 PM2 集群 + SQLite 数据回滚问题**：当使用 SQLite(sql.js) 时，强制 PM2 单实例运行，避免多进程同时写库导致用户/角色等数据被覆盖回滚。
- **修复默认管理员被删除后自动重建**：默认管理员仅在“全新空库”初始化时创建，不再在生产环境启动时反复补回。
- **防误删保护**：禁止删除最后一个超级管理员，避免系统无人可管。

## [1.3.0] - 2026-01-24

### 🛡️ 深度安全加固 (Security Hardening)
- **XSS 漏洞全面封堵**:
  - 彻底移除 `onclick` 等内联属性中的模板字符串插值，改为基于 `data-*` 属性与事件委托（`safeOnclick`）的安全交互模式，从根源消除 DOM-based XSS 风险。
  - 对所有动态渲染的 HTML 内容（如用户名、题目内容）强制进行 HTML 实体转义。
- **会话管理与主动防御**:
  - **服务端会话销毁**: 新增 `/api/logout` 接口，支持在客户端退出时同步吊销服务端 Token。
  - **异地登录主动断开**: 账号在别处登录时，不仅吊销旧 Token，还会主动断开该用户的 SSE 连接，实现真正的实时下线。
- **权限与越权访问控制**:
  - **敏感数据收紧**: 限制学生访问分组列表、专业分类等管理端接口，遵循最小权限原则。
  - **越权校验加强**: 为试卷详情、考生试卷列表、排行榜等接口增加严格的权属与推送范围校验，防止通过遍历 ID 获取他人数据。
- **输入验证与加固**: 
  - 为所有 API 路由增加输入存在性与合法性基础校验。
  - 优化 CSP (Content Security Policy) 策略，进一步收紧脚本与样式来源限制。

### 🔐 飞书集成与体验优化
- **飞书免登与免确认**:
  - 实现了飞书环境内的静默登录（免登）功能，大幅提升用户进入系统的便捷性。
  - 在登录页飞书图标下方新增实时状态提示（如“正在尝试免登录...”），增强交互透明度。
- **账号单点登录 (SSO) 限制**:
  - **单设备强制下线**: 引入单账号单活动会话限制，新设备登录将自动踢掉旧设备。
  - **实时下线通知**: 集成 SSE 技术，实时感知账号异动。
- **JSSDK 稳定加载**: 修复了飞书 JSSDK 官方链接 ORB 阻断问题，并采用动态按需加载策略，解决非飞书环境下的报错。

### 🛠️ 系统架构与部署升级
- **一键化部署工具 (`run.sh`)**:
  - **Redis & PM2 自动化配置**: 菜单 11 升级为“一键配置 Redis & PM2”，支持自动检测系统环境、安装缺失组件并完成全套配置。
  - **PM2 深度集成**: 脚本现在能自动识别 PM2 环境。若已安装，将优先使用 `ecosystem.config.js` 以集群模式（Cluster Mode）启动服务，并支持 `pm2 save` 实现开机自启。
  - **传统模式兼容**: 在未安装 PM2 的环境下，脚本会自动回退至稳健的 `nohup` 模式，确保服务高可用。
- **会话存储重构**: 重构了 `SessionStore`，新增 `userTokens` 映射表，支持高效的“用户-令牌”吊销检查。
- **统一请求封装**: 增强前端 `authFetch`，支持 401 状态码的统一拦截与会话失效引导。
- **版本一致性控制**: 统一了 `package.json`、`package-lock.json` 与 `/api/version` 接口的版本标识。

## [1.2.0] - 2026-01-23

### 📚 题库设置功能深度增强
- **进阶导入导出**: 支持按“所有题库”或“指定题库”进行区分操作，满足多样化数据迁移需求。
- **权限精细化隔离**: 严格区分操作权限，超管可操作全局题库，组管权限锁定在本组题库范围内。
- **数据安全保障**: 
  - 导入前新增清空原有题库的二次确认机制，彻底规避误操作风险。
  - 导入逻辑支持批量处理，大幅提升大数据量下的导入性能。
- **文件规范化**: 
  - 导出文件名自动遵循“题库名称+导出时间”命名规则。
  - “导出所有”模式下支持自动将所有 Excel 题库打包为 ZIP 压缩包，一键下载。
- **数据校验升级**: 
  - 导出表新增“题库归属”字段（紧随设备类型后），信息更完整。
  - 导入时新增严格的表头校验、基础信息完整性校验及业务数据合法性（题库存在性）校验。

### 🛡️ 试卷管理权属逻辑重构
- **权属标识升级**: 将试卷列表中的“归属分组”重构为“试卷管理员”。
  - 超管创建的试卷标识为“超级管理员”。
  - 组管创建的试卷标识为对应的“分组名称”。
- **管理权限隔离**: 
  - **组管隔离**: 组管现在仅能管理（查看/编辑/推送/删除）由自己亲自创建的试卷，实现了管理颗粒度的垂直细化。
  - **超管全局观**: 超管依然保持对系统中所有试卷的最高管理权限。
- **后端接口加固**: 同步更新所有试卷相关 API，在服务端增加 `creatorId` 级联校验，防止越权操作。

### 🎨 分组及用户设置 UI/UX 优化
- **分组重命名**: 新增超管修改已存在分组名称的功能，提升分组管理灵活性。
- **布局平衡优化**: 
  - **宽度调整**: 将分组管理面板宽度由 300px 提升至 480px，为长名称预留充足空间。
  - **挤压保护**: 引入 `white-space: nowrap` 与 `flex-shrink: 0` 策略，确保分组名称过长时不会挤压操作按钮。
- **操作交互对齐**: PC 端用户管理操作按钮改为左对齐，视觉动线更顺畅，且在按钮动态隐藏时保持布局美观。
- **视觉对比增强**: 优化了管理员（超管/组管）名称在不同主题下的颜色显示，采用系统变量 `var(--primary)` 确保视觉一致性与高对比度。

### 🤖 自动化工作流与通知
- **飞书群通知集成**: 成功接入 GitHub Release 工作流，新版本发布后自动向飞书群推送交互式卡片通知。
- **动态卡片生成**: 通知内容动态抓取 Release 标题与变更日志，实现版本更新信息的实时、精准触达。

## [1.1.0] - 2026-01-22

### 🚀 考试流程与推送逻辑重大升级
- **重复推送支持**: 允许管理员对已完成考试的考生重新推送同一份试卷。
- **成绩保留策略**: 当考生多次参加同一场考试时，系统将自动保留最后一次提交的成绩，确保考核结果的时效性。
- **准入机制优化**: 基于推送时间与提交时间的动态对比，精准控制考生的考试权限。

### 📱 移动端答题界面极致优化
- **布局重构**: 将题号进度移至顶部左侧，剩余时间与累计用时移至顶部右侧，大幅减少垂直空间占用。
- **溢出保护**: 彻底解决了移动端答题卡片内容溢出、Header 高度不协调以及样式冲突问题。
- **交互提升**: 将“继续考试”按钮背景由灰色升级为具有视觉冲击力的橙色渐变（`btn-warning`），并增加悬停动效。

### 🛠️ 管理后台功能增强与 UI 打磨
- **试卷设置模块**: 
  - “创建试卷”更名为“试卷设置”，逻辑更清晰。
  - **编辑功能**: 新增已创建试卷的在线编辑功能，支持实时调整题目配置并同步更新创建时间。
- **手动选题器进化**: 
  - 界面风格与主列表完美统一，支持级联筛选与关键词搜索。
  - **题目预览**: 新增“查看”功能，支持以只读模式快速预览题目详情、选项及标准答案。
- **系统日志优化**:
  - **字段重排**: 调整为“对象-操作-操作者”顺序，更符合操作审计逻辑。
  - **视觉降噪**: 优化了对象字段的背景样式，引入半透明深色设计，提升整体专业感。
  - **一键清空**: 简化日志清理流程，支持一键清空所有历史审计记录。

### 🌐 全局规范化与修复
- **时间格式统一**: 全系统时间显示规范化为 `YYYY-MM-DD HH:mm:ss`。
- **排行榜修复**: 解决了考生界面排行榜列表加载失败的问题，并同步增加了“交卷时间”展示。
- **日志过滤修复**: 修复了“更新试卷”等操作在日志筛选中无法正常显示的 Bug。

### 🛠️ 核心功能修复与编辑器重构
- **题库编辑优化**:
  - **布局升级**: 将题库编辑器（Modal）宽度提升至 1000px，并引入选项双列网格布局，消除冗余垂直滚动。
  - **冲突修复**: 彻底解决了新增与编辑模式下的 DOM ID 冲突，修复了选项重复加载和数据混淆的 Bug。
  - **视觉对齐**: 压缩了表单内边距与垂直间距，使核心编辑区域在一个屏幕高度内完整呈现。

### 🎨 UI/UX 深度打磨
- **移动端体验修复**: 修复了小屏幕下顶部内容被固定 Header 遮挡的问题，并同步更新了所有静态资源的缓存版本号。
- **列表可视化增强**: 题库列表中的“单选、多选、判断”题型现在使用蓝、黄、绿三种不同颜色徽章进行区分，显著提升识别速度。

### 🛡️ 系统稳定性
- **核心 Bug 修复**: 解决了 `db-adapter.js` 中 `dbConfig` 未定义的全局错误。
- **版本同步**: 实现了前后端版本号的精细化同步。

## [1.0.17] - 2026-01-21

### 📱 移动端管理后台 UI 深度重构
- **视觉层级进化**: 建立了“大标题-小副标-中菜单”的专家级字号比例（24px-14px-18px），主次极其分明。
- **品牌感提升**: 将“企业考试系统”设为 24px 白色粗体主标题，极具职业化工具质感。
- **触控标准化**: 统一菜单项为 18px 黄金字号，并将点击热区锁定在 56px 最小高度，显著提升操作容错率。
- **硬件级适配**: 引入 `env(safe-area-inset-top)`，完美避让所有刘海屏与挖孔屏手机的系统状态栏。
- **布局微调**: 
  - 优化了标题与功能区之间的物理隔离间距（30px）。
  - 实现主副标题与下方菜单图标轴线的严格垂直对齐。
  - 压缩底部管理卡片厚度并增加底部悬浮感间距。

### 🛡️ 系统安全性与性能增强
- **密码哈希升级**: 引入 `bcryptjs` 库，替代原有的 SHA256 存储方案，支持更安全的盐值哈希加密。
- **平滑兼容**: 登录逻辑支持自动识别旧版 SHA256 哈希，确保用户升级后无需重置密码。
- **数据库索引优化**: 在 SQLite, MySQL, PostgreSQL 各端同步增加了关键字段（groupId, userId, paperId）的索引，大幅提升大数据量下的查询效率。
- **全局错误屏蔽**: 实现后端异常堆栈的统一过滤，仅对前端返回友好的错误提示，保护后端物理路径、表结构等敏感信息不泄露。
- **日志清理优化**: 修复并整合了日志批量删除接口，提升了系统自我维护的健壮性。

## [1.0.16] - 2026-01-20

### 📱 移动端深度适配与响应式布局升级
- **Tab 栏式导航**: 为移动端引入了全新的底部固定 Tab 导航栏，提供类似原生 App 的操作体验。
- **管理后台适配**: 优化了管理后台在小屏幕下的显示效果，支持侧边栏自动折叠与响应式过滤器布局。
- **UI 组件重构**:
  - 重构了所有按钮和表单项的触摸热区，使其更易于点击。
  - 优化了弹出框（Modal）和提示信息在移动端的定位与宽度。
- **响应式断点**: 增加了多个 CSS 媒体查询断点，确保从折叠屏手机到 iPad 平板电脑都能完美显示。

## [1.0.15] - 2026-01-20

### 🎨 登录界面视觉增强与系统健康优化
- **整体放大**: 显著增大了登录卡片的宽度、字体以及输入框尺寸，使界面更加大气，视觉焦点更集中。
- **响应式优化**: 优化了登录框在不同屏幕尺寸下的自适应表现。
- **版本对齐**: 引入了前后端版本自动化同步机制，确保管理后台显示的系统版本始终与后端物理版本保持一致。
- **间距平衡**: 精确调整了 Logo、表单项与登录按钮之间的间距，提升了整体排版的美感。

## [1.0.14] - 2026-01-20

### 🔄 环境配置管理重大升级 (模板填充法)
- **核心逻辑重构**: 引入全新的“模板填充”机制。系统启动前会以 `.env.example` 为底稿，自动将旧配置项的值精准迁移。
- **配置同步**: 若新版本增加了环境变量（如 `NODE_ENV`），系统将自动将其及默认值以正确的排版补全，不再需要手动干预。
- **服务管理优化**: 修复了 `run.sh` 中 Redis 服务启动时无法识别别名（Alias）导致的红色报错问题。
- **文档修正**: 同步修正了 `README.md` 中关于 Redis 一键配置的菜单项编号（修正为 11）。

## [1.0.13] - 2026-01-20

### 🛠️ 脚本与文档修复
- **服务管理**: 修复了 `run.sh` 中 Redis 服务启动时无法识别别名（Alias）导致的报错问题。
- **文档精确化**:
  - 修正了 `README.md` 中关于一键配置 Redis 的菜单项编号说明（由选项 6 修正为 11）。
  - 同步更新了 `.env.example`，增加了 `NODE_ENV` 变量模板，确保与文档一致。

## [1.0.12] - 2026-01-20

### 🚀 系统优化与安全性
- **高并发支持**: 在 `README.md` 中增加了详细的数据库选型、Redis 会话及连接池优化配置指南。
- **默认账号补完**: 修正了数据库初始化逻辑，现在系统首次启动时会自动创建 `admin` 和 `student` 两个默认账号，且账号可由管理员自行删除。
- **UI/UX 改进**:
  - 删除了登录页面下方的默认账号明文显示，增强隐私安全。
  - 统一了文档、UI 与后端初始化逻辑中的默认用户名（原“张三”统一为 `student`）。
- **Bug 修复**: 修复了 PostgreSQL 初始化脚本中缺失 `VALUES` 关键字的问题。

## [1.0.11] - 2026-01-20

### 🛡️ 安全性与健壮性增强
- **配置校验**:
  - 在 `server.js` 启动时增加 `.env` 文件探测，若缺失则输出黄色警告日志。
  - 在 `run.sh` 启动流程中增加配置文件强制检查。
  - 若 `.env` 缺失但存在 `.env.example`，脚本将自动根据模板创建配置文件，确保环境配置项完整。
  - 防止系统在无配置状态下“静默启动”导致的高并发环境降级风险。

## [1.0.10] - 2026-01-20

### 🐛 问题修复
- **部署脚本**:
  - 修复了系统更新时 `run.sh` 未能同步更新 `.env.example` 文件的问题。
  - 现在执行更新操作将自动刷新 `.env.example`，方便用户参考最新的配置项（如 `USE_REDIS`, `DB_CONNECTION_LIMIT`）。

## [1.0.9] - 2026-01-20

### 🔥 高并发架构优化
- **会话架构 (Session)**:
  - 实现了通用的 `SessionStore` 接口，支持内存和 Redis 两种模式。
  - 引入 `USE_REDIS` 环境变量，支持基于 Redis 的分布式会话管理。
- **数据库性能**:
  - 支持通过 `DB_CONNECTION_LIMIT` 环境变量配置 MySQL/PostgreSQL 的连接池大小。
- **文件上传稳定性**:
  - 将文件上传方式切换为磁盘暂存 (Disk Storage)，防止高并发下内存溢出 (OOM)。
- **进程管理**:
  - 新增 `ecosystem.config.js` 配置文件，支持 PM2 集群模式。

### 🛠️ 系统工具
- **自动配置**:
  - 在 `run.sh` 中新增了 `install_redis` 功能 (菜单选项 11)。
  - 支持在 Linux 上一键安装并配置 Redis。
